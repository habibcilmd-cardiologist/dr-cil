{{/* Hero Section - Split Layout (Custom CSS + Blowfish tokens) */}}
{{ $disableImageOptimization := .Site.Params.disableImageOptimization | default false }}

{{/* Find common URLs by translationKey (sections are not in RegularPages) */}}
{{ $servicesURL := "" }}
{{ with first 1 (where .Site.Pages "Params.translationKey" "services") }}
  {{ $servicesURL = (index . 0).RelPermalink }}
{{ end }}
{{ if not $servicesURL }}
  {{ $servicesURL = printf "%s/services/" .Site.LanguagePrefix }}
{{ end }}

{{ $contactURL := "" }}
{{ with first 1 (where .Site.Pages "Params.translationKey" "contact") }}
  {{ $contactURL = (index . 0).RelPermalink }}
{{ end }}
{{ if not $contactURL }}
  {{ $contactURL = printf "%s/contact/" .Site.LanguagePrefix }}
{{ end }}

{{ $taglinePrefix := i18n "hero_tagline_prefix" | default "" }}
{{ $taglineHighlight := i18n "hero_tagline_highlight" | default "" }}

<section class="home-hero">
  {{/* Background decoration */}}
  <div class="home-hero-bg" aria-hidden="true">
    <svg class="home-hero-ecg" viewBox="0 0 1200 100" preserveAspectRatio="none">
      <path class="hero-ecg-line" fill="none" stroke="currentColor" stroke-width="1.5" d="M0,50 L200,50 L220,20 L240,80 L260,50 L400,50 L420,10 L440,90 L460,50 L1200,50" />
    </svg>
    <div class="home-hero-blob home-hero-blob--primary animate-hero-drift"></div>
    <div class="home-hero-blob home-hero-blob--secondary animate-hero-drift" style="animation-delay: 2s;"></div>
  </div>

  <div class="home-hero-container">
    <div class="home-hero-grid">
      {{/* Left */}}
      <div class="home-hero-content">
        <div class="home-hero-badges">
          <span class="home-hero-badge home-hero-badge--primary">
            {{ .Site.Params.Author.headline | default (i18n "hero_expertise_1" | default "") }}
          </span>
          <span class="home-hero-badge home-hero-badge--secondary">
            {{ i18n "hero_location" | default "Ä°stanbul" }}
          </span>
        </div>

        <h1 class="home-hero-title">{{ .Site.Params.Author.name | default .Site.Title }}</h1>

        {{ if or $taglinePrefix $taglineHighlight }}
          <h2 class="home-hero-subtitle">
            {{ with $taglinePrefix }}{{ . }}{{ end }}
            {{ with $taglineHighlight }} <span class="home-hero-subtitle-highlight">{{ . }}</span>{{ end }}
          </h2>
        {{ end }}

        <p class="home-hero-description">{{ i18n "hero_bio" | default .Site.Params.Author.bio }}</p>

        <div class="home-hero-stats">
          <div class="home-hero-stat">
            <span class="home-hero-stat-number home-hero-stat-number--primary">25+</span>
            <span class="home-hero-stat-label">{{ i18n "hero_experience" | default "Years Experience" }}</span>
          </div>
          <div class="home-hero-stat">
            <span class="home-hero-stat-number home-hero-stat-number--secondary">20K+</span>
            <span class="home-hero-stat-label">{{ i18n "hero_procedures" | default "Procedures" }}</span>
          </div>
          <div class="home-hero-stat">
            <span class="home-hero-stat-number">100+</span>
            <span class="home-hero-stat-label">{{ i18n "hero_publications" | default "Publications" }}</span>
          </div>
        </div>

        <div class="home-hero-actions">
          <a href="{{ $contactURL }}" class="home-hero-btn home-hero-btn--primary">
            {{ i18n "hero_primary_cta" | default (i18n "hero_about_cta" | default "Contact") }}
          </a>
          <a href="{{ $servicesURL }}" class="home-hero-btn home-hero-btn--secondary">
            {{ i18n "hero_services_cta" | default "Services" }}
          </a>
        </div>
      </div>

      {{/* Right */}}
      <div class="home-hero-media">
        <div class="home-hero-image-backdrop" aria-hidden="true"></div>

        {{/* Hero image: prefer homepageImage if set, else author image */}}
        {{ $heroImageRef := "" }}
        {{ with .Site.Params.homepage.homepageImage }}
          {{ $heroImageRef = . }}
        {{ end }}
        {{ if not $heroImageRef }}
          {{ with .Site.Params.Author.image }}
            {{ $heroImageRef = . }}
          {{ end }}
        {{ end }}

        {{ $heroImage := "" }}
        {{ if $heroImageRef }}
          {{ if or (strings.HasPrefix $heroImageRef "http:") (strings.HasPrefix $heroImageRef "https:") }}
            {{ $heroImage = resources.GetRemote $heroImageRef }}
          {{ else }}
            {{ $heroImage = resources.Get $heroImageRef }}
          {{ end }}
        {{ end }}

        {{ if $heroImage }}
          {{ $final := $heroImage }}
          {{ if not $disableImageOptimization }}
            {{ $final = $heroImage.Fit (print "700x900 q" ( $.Site.Params.Author.imagequality | default "96" )) }}
          {{ end }}
          <img src="{{ $final.RelPermalink }}" alt="{{ $.Site.Params.Author.name | default $.Site.Title }}" class="home-hero-image" loading="eager" />
        {{ end }}

        <div class="home-hero-float-card home-hero-float-card--left animate-hero-float">
          <div class="home-hero-float-inner">
            <div class="home-hero-float-icon home-hero-float-icon--secondary" aria-hidden="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41 1.01 4.22 2.44C11.59 5.01 13.26 4 15 4 17.5 4 19.5 6 19.5 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
              </svg>
            </div>
            <div>
              <p class="home-hero-float-label">{{ i18n "hero_float_1_label" | default (i18n "hero_expertise_1" | default "") }}</p>
              <p class="home-hero-float-value">{{ i18n "hero_float_1_value" | default (i18n "hero_expertise_3" | default "") }}</p>
            </div>
          </div>
        </div>

        <div class="home-hero-float-card home-hero-float-card--right animate-hero-float" style="animation-delay: 2s;">
          <div class="home-hero-float-inner">
            <div class="home-hero-float-icon home-hero-float-icon--primary" aria-hidden="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 10L12 4 2 10l10 6 10-6z" />
                <path d="M6 12v5c0 1 3 3 6 3s6-2 6-3v-5" />
              </svg>
            </div>
            <div>
              <p class="home-hero-float-label">{{ i18n "hero_float_2_label" | default "" }}</p>
              <p class="home-hero-float-value">{{ i18n "hero_float_2_value" | default "" }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
